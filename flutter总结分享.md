大家下午好，我是来自移动端iOS组的萝卜，

今天代表移动端给大家分享下我们这近在使用的flutter技术

今天分享的目的：

1. 让大家对flutter有一个全面的认识
2. flutter的优势 整体框架，原理
3. 再讲一下flutter在省钱快报的使用情况

1. ### 什么是flutter 

   1. 什么是flutter，Flutter是Google开发的一套全新的**跨平台**、**开源**UI框架，可以**快速**在iOS和Android上构建高质量的原生用户界面, 支持移动、web 、桌面应用开发，并且是未来新操作系统Fuchsia的默认开发套件。
   2. 18的12月份发布了第一个正式的版本，所有flutter还是一项非常新的跨平台技术

2. 跨平台技术的演进

   1. 说到跨平台，先介绍下他的前辈和大哥情况

   2. 最早是通过web技术实现的跨平台，好处就是可以快速把以web技术包装成一个app，但非常局限于webview性能，渲染效率非常低，整个体验非常的不好，特别是在一些低端机上

   3. 15年Facebook 推出了RN，把渲染交给原生；使用类HTML+JS的UI构建逻辑，但是最终会生成对应的自定义原生控件；原生控件相对于WebView就有了更高的绘制效率，滑动体验上有了更好的体验；缺点的花：框架本身和App开发者绑在了系统的控件系统上，需要对android和iOS有比较深了解，框架本身需要处理大量平台相关的逻辑，随着系统版本变化和API的变化，开发者可能也需要处理不同平台的差异

   4. 说到我们今天介绍flutter：从头到尾重写一套跨平台的UI框架，包括UI控件、渲染逻辑甚至开发语言；他的渲染引擎依靠跨平台的Skia图形库来实现，最大程度上保证不同平台、不同设备的体验一致性

   5. 说到flutter，他从头到尾重写了一台跨平台UI框架；包括他的UI控件，渲染逻辑 甚至开发语言；渲染不需要给原生，能自己渲染；这样保证了各个平台UI和体验上是一致的；

      

3. flutter的优势

   1. 高性能
      1. 
   2. 高效率
   3. UI一致性
      1. 因为底层使用是skia引擎，
   4. 其他

4. flutter 框架认识

5. 一切皆组件

6. 原生通信 Channel

7. 省钱快报在flutter中的实践

8. 哪些业务落地了flutter技术

   1. 金币阅读
      1. 图文展示，通过阅读赚钱金币
      2. 签到模块
   2. 查价工具
      1. 通过复制淘宝链接，查询商品历史架构
   3. 话音三期
      1. 这是让用户去淘宝，jdpdd如何正常的复制商品标题厚返回省钱快报，我们模拟整个换端的逻辑，使用Flutter写了三个淘宝页面闪屏+商品详情页，用户没有真正去淘宝，所有的交互都是在我们app内完成的
      2. 

9. 落地的步骤

   1. 发展过程
   2. 2-3月份探索之后，我们决定上线验证下Flutter，我们重新了前面我看到的金币阅读所有逻辑；做了一个AB实验；AB实验稳定之后，我马上来我们的比价项目；现在马上要上线话音三期；还有后续进入半糖app 成分模块也会使用flutter来做； 
   3. 遇到的挑战
      1. 这是一个全新技术，我们也没有相关这方面的经验；整个都是从头开始学习；其实使用flutter写一个全新项目好写，怎么把他落地到原生项目中其实是一件非常大的挑战，需要考虑的因素会很多；什么方式引入，不能对现有功能有影响，怎么和原生工程交互，怎么进行打通原生工程已有功能，比如我们的埋点体系，异常收集提醒；网上有很多快速写页面的，但是实战混合的比较少，这也是一步一步的摸索过来；
   4. 省钱架构
      1. 通过摸索我们也探索了一条属于我们自己的混合框架
         1. 我们使用了单独flutter module 工程，独立于android和iOS两个工程；他可以单独编译和调试，增加整个flutter开发速度；不需要关心原生存在； 最终开发完成之后我们通过编译产品，通过pod和gridle把flutter产品引导到Native；这样其他native的同学不需要关系flutter存在，也不需要安装flutter环境；随时可以编译运行；
         2. 在flutter工程中我们通过自定义router 分成了几个业务模块，彼此独立；
         3. 底层做了一些基础的封装；包括网络，埋点；
         4. 
   5. 遇到的坑
      1. 混合工程搭建，已经在native下怎么调试flutter，中间也走了不少弯路
      2. 遇到我们在自定义原生广告在fluter上展示时候，oppo黑屏的问题，通过延迟加载，外部套用透明组件解决

10. 惊喜收获

    1. 研发效率上有非常大提升；
    2. UI设计师的明显降低
    3. 产品的沟通成本较少
    4. 测试时间简单

11. 规划

12. 感谢

13. QA